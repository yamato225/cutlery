{"ast":null,"code":"'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\n/* Protocol - protocol constants */\n\n\nvar protocol = module.exports;\n/* Command code => mnemonic */\n\nprotocol.types = {\n  0: 'reserved',\n  1: 'connect',\n  2: 'connack',\n  3: 'publish',\n  4: 'puback',\n  5: 'pubrec',\n  6: 'pubrel',\n  7: 'pubcomp',\n  8: 'subscribe',\n  9: 'suback',\n  10: 'unsubscribe',\n  11: 'unsuback',\n  12: 'pingreq',\n  13: 'pingresp',\n  14: 'disconnect',\n  15: 'auth'\n};\n/* Mnemonic => Command code */\n\nprotocol.codes = {};\n\nfor (var k in protocol.types) {\n  var v = protocol.types[k];\n  protocol.codes[v] = k;\n}\n/* Header */\n\n\nprotocol.CMD_SHIFT = 4;\nprotocol.CMD_MASK = 0xF0;\nprotocol.DUP_MASK = 0x08;\nprotocol.QOS_MASK = 0x03;\nprotocol.QOS_SHIFT = 1;\nprotocol.RETAIN_MASK = 0x01;\n/* Length */\n\nprotocol.LENGTH_MASK = 0x7F;\nprotocol.LENGTH_FIN_MASK = 0x80;\n/* Connack */\n\nprotocol.SESSIONPRESENT_MASK = 0x01;\nprotocol.SESSIONPRESENT_HEADER = Buffer.from([protocol.SESSIONPRESENT_MASK]);\nprotocol.CONNACK_HEADER = Buffer.from([protocol.codes['connack'] << protocol.CMD_SHIFT]);\n/* Connect */\n\nprotocol.USERNAME_MASK = 0x80;\nprotocol.PASSWORD_MASK = 0x40;\nprotocol.WILL_RETAIN_MASK = 0x20;\nprotocol.WILL_QOS_MASK = 0x18;\nprotocol.WILL_QOS_SHIFT = 3;\nprotocol.WILL_FLAG_MASK = 0x04;\nprotocol.CLEAN_SESSION_MASK = 0x02;\nprotocol.CONNECT_HEADER = Buffer.from([protocol.codes['connect'] << protocol.CMD_SHIFT]);\n/* Properties */\n\nprotocol.properties = {\n  sessionExpiryInterval: 17,\n  willDelayInterval: 24,\n  receiveMaximum: 33,\n  maximumPacketSize: 39,\n  topicAliasMaximum: 34,\n  requestResponseInformation: 25,\n  requestProblemInformation: 23,\n  userProperties: 38,\n  authenticationMethod: 21,\n  authenticationData: 22,\n  payloadFormatIndicator: 1,\n  messageExpiryInterval: 2,\n  contentType: 3,\n  responseTopic: 8,\n  correlationData: 9,\n  maximumQoS: 36,\n  retainAvailable: 37,\n  assignedClientIdentifier: 18,\n  reasonString: 31,\n  wildcardSubscriptionAvailable: 40,\n  subscriptionIdentifiersAvailable: 41,\n  sharedSubscriptionAvailable: 42,\n  serverKeepAlive: 19,\n  responseInformation: 26,\n  serverReference: 28,\n  topicAlias: 35,\n  subscriptionIdentifier: 11\n};\nprotocol.propertiesCodes = {};\n\nfor (var prop in protocol.properties) {\n  var id = protocol.properties[prop];\n  protocol.propertiesCodes[id] = prop;\n}\n\nprotocol.propertiesTypes = {\n  sessionExpiryInterval: 'int32',\n  willDelayInterval: 'int32',\n  receiveMaximum: 'int16',\n  maximumPacketSize: 'int32',\n  topicAliasMaximum: 'int16',\n  requestResponseInformation: 'byte',\n  requestProblemInformation: 'byte',\n  userProperties: 'pair',\n  authenticationMethod: 'string',\n  authenticationData: 'binary',\n  payloadFormatIndicator: 'byte',\n  messageExpiryInterval: 'int32',\n  contentType: 'string',\n  responseTopic: 'string',\n  correlationData: 'binary',\n  maximumQoS: 'int8',\n  retainAvailable: 'byte',\n  assignedClientIdentifier: 'string',\n  reasonString: 'string',\n  wildcardSubscriptionAvailable: 'byte',\n  subscriptionIdentifiersAvailable: 'byte',\n  sharedSubscriptionAvailable: 'byte',\n  serverKeepAlive: 'int16',\n  responseInformation: 'string',\n  serverReference: 'string',\n  topicAlias: 'int16',\n  subscriptionIdentifier: 'var'\n};\n\nfunction genHeader(type) {\n  return [0, 1, 2].map(function (qos) {\n    return [0, 1].map(function (dup) {\n      return [0, 1].map(function (retain) {\n        var buf = Buffer.alloc(1);\n        buf.writeUInt8(protocol.codes[type] << protocol.CMD_SHIFT | (dup ? protocol.DUP_MASK : 0) | qos << protocol.QOS_SHIFT | retain, 0, true);\n        return buf;\n      });\n    });\n  });\n}\n/* Publish */\n\n\nprotocol.PUBLISH_HEADER = genHeader('publish');\n/* Subscribe */\n\nprotocol.SUBSCRIBE_HEADER = genHeader('subscribe');\nprotocol.SUBSCRIBE_OPTIONS_QOS_MASK = 0x03;\nprotocol.SUBSCRIBE_OPTIONS_NL_MASK = 0x01;\nprotocol.SUBSCRIBE_OPTIONS_NL_SHIFT = 2;\nprotocol.SUBSCRIBE_OPTIONS_RAP_MASK = 0x01;\nprotocol.SUBSCRIBE_OPTIONS_RAP_SHIFT = 3;\nprotocol.SUBSCRIBE_OPTIONS_RH_MASK = 0x03;\nprotocol.SUBSCRIBE_OPTIONS_RH_SHIFT = 4;\nprotocol.SUBSCRIBE_OPTIONS_RH = [0x00, 0x10, 0x20];\nprotocol.SUBSCRIBE_OPTIONS_NL = 0x04;\nprotocol.SUBSCRIBE_OPTIONS_RAP = 0x08;\nprotocol.SUBSCRIBE_OPTIONS_QOS = [0x00, 0x01, 0x02];\n/* Unsubscribe */\n\nprotocol.UNSUBSCRIBE_HEADER = genHeader('unsubscribe');\n/* Confirmations */\n\nprotocol.ACKS = {\n  unsuback: genHeader('unsuback'),\n  puback: genHeader('puback'),\n  pubcomp: genHeader('pubcomp'),\n  pubrel: genHeader('pubrel'),\n  pubrec: genHeader('pubrec')\n};\nprotocol.SUBACK_HEADER = Buffer.from([protocol.codes['suback'] << protocol.CMD_SHIFT]);\n/* Protocol versions */\n\nprotocol.VERSION3 = Buffer.from([3]);\nprotocol.VERSION4 = Buffer.from([4]);\nprotocol.VERSION5 = Buffer.from([5]);\n/* QoS */\n\nprotocol.QOS = [0, 1, 2].map(function (qos) {\n  return Buffer.from([qos]);\n});\n/* Empty packets */\n\nprotocol.EMPTY = {\n  pingreq: Buffer.from([protocol.codes['pingreq'] << 4, 0]),\n  pingresp: Buffer.from([protocol.codes['pingresp'] << 4, 0]),\n  disconnect: Buffer.from([protocol.codes['disconnect'] << 4, 0])\n};","map":{"version":3,"sources":["/react/cutlery/web-console/node_modules/mqtt-packet/constants.js"],"names":["Buffer","require","protocol","module","exports","types","codes","k","v","CMD_SHIFT","CMD_MASK","DUP_MASK","QOS_MASK","QOS_SHIFT","RETAIN_MASK","LENGTH_MASK","LENGTH_FIN_MASK","SESSIONPRESENT_MASK","SESSIONPRESENT_HEADER","from","CONNACK_HEADER","USERNAME_MASK","PASSWORD_MASK","WILL_RETAIN_MASK","WILL_QOS_MASK","WILL_QOS_SHIFT","WILL_FLAG_MASK","CLEAN_SESSION_MASK","CONNECT_HEADER","properties","sessionExpiryInterval","willDelayInterval","receiveMaximum","maximumPacketSize","topicAliasMaximum","requestResponseInformation","requestProblemInformation","userProperties","authenticationMethod","authenticationData","payloadFormatIndicator","messageExpiryInterval","contentType","responseTopic","correlationData","maximumQoS","retainAvailable","assignedClientIdentifier","reasonString","wildcardSubscriptionAvailable","subscriptionIdentifiersAvailable","sharedSubscriptionAvailable","serverKeepAlive","responseInformation","serverReference","topicAlias","subscriptionIdentifier","propertiesCodes","prop","id","propertiesTypes","genHeader","type","map","qos","dup","retain","buf","alloc","writeUInt8","PUBLISH_HEADER","SUBSCRIBE_HEADER","SUBSCRIBE_OPTIONS_QOS_MASK","SUBSCRIBE_OPTIONS_NL_MASK","SUBSCRIBE_OPTIONS_NL_SHIFT","SUBSCRIBE_OPTIONS_RAP_MASK","SUBSCRIBE_OPTIONS_RAP_SHIFT","SUBSCRIBE_OPTIONS_RH_MASK","SUBSCRIBE_OPTIONS_RH_SHIFT","SUBSCRIBE_OPTIONS_RH","SUBSCRIBE_OPTIONS_NL","SUBSCRIBE_OPTIONS_RAP","SUBSCRIBE_OPTIONS_QOS","UNSUBSCRIBE_HEADER","ACKS","unsuback","puback","pubcomp","pubrel","pubrec","SUBACK_HEADER","VERSION3","VERSION4","VERSION5","QOS","EMPTY","pingreq","pingresp","disconnect"],"mappings":"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","sourcesContent":["'use strict'\n\nvar Buffer = require('safe-buffer').Buffer\n\n/* Protocol - protocol constants */\nvar protocol = module.exports\n\n/* Command code => mnemonic */\nprotocol.types = {\n  0: 'reserved',\n  1: 'connect',\n  2: 'connack',\n  3: 'publish',\n  4: 'puback',\n  5: 'pubrec',\n  6: 'pubrel',\n  7: 'pubcomp',\n  8: 'subscribe',\n  9: 'suback',\n  10: 'unsubscribe',\n  11: 'unsuback',\n  12: 'pingreq',\n  13: 'pingresp',\n  14: 'disconnect',\n  15: 'auth'\n}\n\n/* Mnemonic => Command code */\nprotocol.codes = {}\nfor (var k in protocol.types) {\n  var v = protocol.types[k]\n  protocol.codes[v] = k\n}\n\n/* Header */\nprotocol.CMD_SHIFT = 4\nprotocol.CMD_MASK = 0xF0\nprotocol.DUP_MASK = 0x08\nprotocol.QOS_MASK = 0x03\nprotocol.QOS_SHIFT = 1\nprotocol.RETAIN_MASK = 0x01\n\n/* Length */\nprotocol.LENGTH_MASK = 0x7F\nprotocol.LENGTH_FIN_MASK = 0x80\n\n/* Connack */\nprotocol.SESSIONPRESENT_MASK = 0x01\nprotocol.SESSIONPRESENT_HEADER = Buffer.from([protocol.SESSIONPRESENT_MASK])\nprotocol.CONNACK_HEADER = Buffer.from([protocol.codes['connack'] << protocol.CMD_SHIFT])\n\n/* Connect */\nprotocol.USERNAME_MASK = 0x80\nprotocol.PASSWORD_MASK = 0x40\nprotocol.WILL_RETAIN_MASK = 0x20\nprotocol.WILL_QOS_MASK = 0x18\nprotocol.WILL_QOS_SHIFT = 3\nprotocol.WILL_FLAG_MASK = 0x04\nprotocol.CLEAN_SESSION_MASK = 0x02\nprotocol.CONNECT_HEADER = Buffer.from([protocol.codes['connect'] << protocol.CMD_SHIFT])\n\n/* Properties */\nprotocol.properties = {\n  sessionExpiryInterval: 17,\n  willDelayInterval: 24,\n  receiveMaximum: 33,\n  maximumPacketSize: 39,\n  topicAliasMaximum: 34,\n  requestResponseInformation: 25,\n  requestProblemInformation: 23,\n  userProperties: 38,\n  authenticationMethod: 21,\n  authenticationData: 22,\n  payloadFormatIndicator: 1,\n  messageExpiryInterval: 2,\n  contentType: 3,\n  responseTopic: 8,\n  correlationData: 9,\n  maximumQoS: 36,\n  retainAvailable: 37,\n  assignedClientIdentifier: 18,\n  reasonString: 31,\n  wildcardSubscriptionAvailable: 40,\n  subscriptionIdentifiersAvailable: 41,\n  sharedSubscriptionAvailable: 42,\n  serverKeepAlive: 19,\n  responseInformation: 26,\n  serverReference: 28,\n  topicAlias: 35,\n  subscriptionIdentifier: 11\n}\nprotocol.propertiesCodes = {}\nfor (var prop in protocol.properties) {\n  var id = protocol.properties[prop]\n  protocol.propertiesCodes[id] = prop\n}\nprotocol.propertiesTypes = {\n  sessionExpiryInterval: 'int32',\n  willDelayInterval: 'int32',\n  receiveMaximum: 'int16',\n  maximumPacketSize: 'int32',\n  topicAliasMaximum: 'int16',\n  requestResponseInformation: 'byte',\n  requestProblemInformation: 'byte',\n  userProperties: 'pair',\n  authenticationMethod: 'string',\n  authenticationData: 'binary',\n  payloadFormatIndicator: 'byte',\n  messageExpiryInterval: 'int32',\n  contentType: 'string',\n  responseTopic: 'string',\n  correlationData: 'binary',\n  maximumQoS: 'int8',\n  retainAvailable: 'byte',\n  assignedClientIdentifier: 'string',\n  reasonString: 'string',\n  wildcardSubscriptionAvailable: 'byte',\n  subscriptionIdentifiersAvailable: 'byte',\n  sharedSubscriptionAvailable: 'byte',\n  serverKeepAlive: 'int16',\n  responseInformation: 'string',\n  serverReference: 'string',\n  topicAlias: 'int16',\n  subscriptionIdentifier: 'var'\n}\n\nfunction genHeader (type) {\n  return [0, 1, 2].map(function (qos) {\n    return [0, 1].map(function (dup) {\n      return [0, 1].map(function (retain) {\n        var buf = Buffer.alloc(1)\n        buf.writeUInt8(\n          protocol.codes[type] << protocol.CMD_SHIFT |\n          (dup ? protocol.DUP_MASK : 0) |\n          qos << protocol.QOS_SHIFT | retain, 0, true)\n        return buf\n      })\n    })\n  })\n}\n\n/* Publish */\nprotocol.PUBLISH_HEADER = genHeader('publish')\n\n/* Subscribe */\nprotocol.SUBSCRIBE_HEADER = genHeader('subscribe')\nprotocol.SUBSCRIBE_OPTIONS_QOS_MASK = 0x03\nprotocol.SUBSCRIBE_OPTIONS_NL_MASK = 0x01\nprotocol.SUBSCRIBE_OPTIONS_NL_SHIFT = 2\nprotocol.SUBSCRIBE_OPTIONS_RAP_MASK = 0x01\nprotocol.SUBSCRIBE_OPTIONS_RAP_SHIFT = 3\nprotocol.SUBSCRIBE_OPTIONS_RH_MASK = 0x03\nprotocol.SUBSCRIBE_OPTIONS_RH_SHIFT = 4\nprotocol.SUBSCRIBE_OPTIONS_RH = [0x00, 0x10, 0x20]\nprotocol.SUBSCRIBE_OPTIONS_NL = 0x04\nprotocol.SUBSCRIBE_OPTIONS_RAP = 0x08\nprotocol.SUBSCRIBE_OPTIONS_QOS = [0x00, 0x01, 0x02]\n\n/* Unsubscribe */\nprotocol.UNSUBSCRIBE_HEADER = genHeader('unsubscribe')\n\n/* Confirmations */\nprotocol.ACKS = {\n  unsuback: genHeader('unsuback'),\n  puback: genHeader('puback'),\n  pubcomp: genHeader('pubcomp'),\n  pubrel: genHeader('pubrel'),\n  pubrec: genHeader('pubrec')\n}\n\nprotocol.SUBACK_HEADER = Buffer.from([protocol.codes['suback'] << protocol.CMD_SHIFT])\n\n/* Protocol versions */\nprotocol.VERSION3 = Buffer.from([3])\nprotocol.VERSION4 = Buffer.from([4])\nprotocol.VERSION5 = Buffer.from([5])\n\n/* QoS */\nprotocol.QOS = [0, 1, 2].map(function (qos) {\n  return Buffer.from([qos])\n})\n\n/* Empty packets */\nprotocol.EMPTY = {\n  pingreq: Buffer.from([protocol.codes['pingreq'] << 4, 0]),\n  pingresp: Buffer.from([protocol.codes['pingresp'] << 4, 0]),\n  disconnect: Buffer.from([protocol.codes['disconnect'] << 4, 0])\n}\n"]},"metadata":{},"sourceType":"script"}